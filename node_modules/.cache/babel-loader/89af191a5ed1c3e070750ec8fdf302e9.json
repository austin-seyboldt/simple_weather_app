{"ast":null,"code":"import WeatherApiInfo from \"./WeatherApiInfo\";\nimport DefaultData from \"./DefaultData\";\nimport FetchIp from \"./FetchIp\";\nimport IpDataInfo from \"./IpDataApiInfo\";\n\nconst FetchWeatherData = async (location, setLocationData) => {\n  if (location == \"\") {\n    try {\n      let ipRequest = new Request(IpDataInfo.requestURL);\n      const response = await fetch(ipRequest).then(response => response.json());\n      console.log(response);\n      location = `${response.city}, ${response.region_code}`;\n    } catch (error) {\n      console.log(\"Failed to fetch current location from ip address\", error);\n      location = DefaultData.location.name;\n    }\n  }\n\n  console.log(\"fetching new data\");\n  const api_key = WeatherApiInfo.key;\n  const baseRequestURL = WeatherApiInfo.baseRequestURL;\n  const forecastEndpoint = WeatherApiInfo.forecastEndpoint;\n\n  if (typeof location == \"undefined\" || location == null) {\n    location = \"auto:ip\";\n  }\n\n  const dayCount = 1;\n  let forecastRequest = new Request(`${baseRequestURL}${forecastEndpoint}?key=${api_key}&q=${location}&days=${dayCount}`);\n\n  try {\n    const response = await fetch(forecastRequest);\n\n    if (!response.ok) {\n      console.log(\"request failed\");\n      return;\n    }\n\n    let data = await response.json();\n    console.log(data);\n    setLocationData(data);\n    return;\n  } catch (err) {\n    console.log(\"error occurred\");\n  }\n};\n\n_c = FetchWeatherData;\nexport default FetchWeatherData;\n\nvar _c;\n\n$RefreshReg$(_c, \"FetchWeatherData\");","map":{"version":3,"sources":["/home/austin/Desktop/side_projects/simple_weather_app/src/FetchWeatherData.js"],"names":["WeatherApiInfo","DefaultData","FetchIp","IpDataInfo","FetchWeatherData","location","setLocationData","ipRequest","Request","requestURL","response","fetch","then","json","console","log","city","region_code","error","name","api_key","key","baseRequestURL","forecastEndpoint","dayCount","forecastRequest","ok","data","err"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,iBAAvB;;AAEA,MAAMC,gBAAgB,GAAG,OAAOC,QAAP,EAAiBC,eAAjB,KAAqC;AAC1D,MAAID,QAAQ,IAAI,EAAhB,EAAoB;AAChB,QAAI;AACA,UAAIE,SAAS,GAAG,IAAIC,OAAJ,CAAYL,UAAU,CAACM,UAAvB,CAAhB;AACA,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACJ,SAAD,CAAL,CAAiBK,IAAjB,CAAuBF,QAAD,IACzCA,QAAQ,CAACG,IAAT,EADmB,CAAvB;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACAL,MAAAA,QAAQ,GAAI,GAAEK,QAAQ,CAACM,IAAK,KAAIN,QAAQ,CAACO,WAAY,EAArD;AACH,KAPD,CAOE,OAAOC,KAAP,EAAc;AACZJ,MAAAA,OAAO,CAACC,GAAR,CACI,kDADJ,EAEIG,KAFJ;AAIAb,MAAAA,QAAQ,GAAGJ,WAAW,CAACI,QAAZ,CAAqBc,IAAhC;AACH;AACJ;;AAEDL,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,QAAMK,OAAO,GAAGpB,cAAc,CAACqB,GAA/B;AACA,QAAMC,cAAc,GAAGtB,cAAc,CAACsB,cAAtC;AACA,QAAMC,gBAAgB,GAAGvB,cAAc,CAACuB,gBAAxC;;AACA,MAAI,OAAOlB,QAAP,IAAmB,WAAnB,IAAkCA,QAAQ,IAAI,IAAlD,EAAwD;AACpDA,IAAAA,QAAQ,GAAG,SAAX;AACH;;AACD,QAAMmB,QAAQ,GAAG,CAAjB;AAEA,MAAIC,eAAe,GAAG,IAAIjB,OAAJ,CACjB,GAAEc,cAAe,GAAEC,gBAAiB,QAAOH,OAAQ,MAAKf,QAAS,SAAQmB,QAAS,EADjE,CAAtB;;AAIA,MAAI;AACA,UAAMd,QAAQ,GAAG,MAAMC,KAAK,CAACc,eAAD,CAA5B;;AACA,QAAI,CAACf,QAAQ,CAACgB,EAAd,EAAkB;AACdZ,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA;AACH;;AACD,QAAIY,IAAI,GAAG,MAAMjB,QAAQ,CAACG,IAAT,EAAjB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYY,IAAZ;AACArB,IAAAA,eAAe,CAACqB,IAAD,CAAf;AACA;AACH,GAVD,CAUE,OAAOC,GAAP,EAAY;AACVd,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;AACJ,CA5CD;;KAAMX,gB;AA8CN,eAAeA,gBAAf","sourcesContent":["import WeatherApiInfo from \"./WeatherApiInfo\";\nimport DefaultData from \"./DefaultData\";\nimport FetchIp from \"./FetchIp\";\nimport IpDataInfo from \"./IpDataApiInfo\";\n\nconst FetchWeatherData = async (location, setLocationData) => {\n    if (location == \"\") {\n        try {\n            let ipRequest = new Request(IpDataInfo.requestURL);\n            const response = await fetch(ipRequest).then((response) =>\n                response.json()\n            );\n            console.log(response);\n            location = `${response.city}, ${response.region_code}`;\n        } catch (error) {\n            console.log(\n                \"Failed to fetch current location from ip address\",\n                error\n            );\n            location = DefaultData.location.name;\n        }\n    }\n\n    console.log(\"fetching new data\");\n    const api_key = WeatherApiInfo.key;\n    const baseRequestURL = WeatherApiInfo.baseRequestURL;\n    const forecastEndpoint = WeatherApiInfo.forecastEndpoint;\n    if (typeof location == \"undefined\" || location == null) {\n        location = \"auto:ip\";\n    }\n    const dayCount = 1;\n\n    let forecastRequest = new Request(\n        `${baseRequestURL}${forecastEndpoint}?key=${api_key}&q=${location}&days=${dayCount}`\n    );\n\n    try {\n        const response = await fetch(forecastRequest);\n        if (!response.ok) {\n            console.log(\"request failed\");\n            return;\n        }\n        let data = await response.json();\n        console.log(data);\n        setLocationData(data);\n        return;\n    } catch (err) {\n        console.log(\"error occurred\");\n    }\n};\n\nexport default FetchWeatherData;\n"]},"metadata":{},"sourceType":"module"}